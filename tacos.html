<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nos Tacos</title>
    <link rel="stylesheet" href="css/Tacos.css" />

  
</head>
<body>
  
  <div class="container">
    <a href="index.html" class="bouton-retour">← Retour à l'accueil</a>
    <h1>Nos Tacos</h1>
    <p class="sous-titre">Garnis de frites & sauce</p>

    <h2 class="section-title">Nos créations</h2>
    
    <div class="liste-produits">
      <!-- Tacos M -->
      <div class="produit" id="tacosM">
        <img src="images/Tacos/m.png" alt="Tacos-M" class="image-produit" />
        <div class="produit-contenu">
          <h3>Tacos M</h3>
          <p class="description-produit">Garnis de frite & de sauce fromage - 1 viande</p>
          
          <div class="options-tacos">
            <div class="option">
              <label for="viande-tacosM">Viande :</label>
              <select id="viande-tacosM" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="sauce-tacosM">Sauce :</label>
              <select id="sauce-tacosM" class="sauce-select">
                <option value="Mayo Blanche">Mayo Blanche</option>
                <option value="Harissa">Harissa</option>
                <option value="Samourai">Samourai</option>
                <option value="Biggy">Biggy</option>
                <option value="Ketchup">Ketchup</option>
                <option value="Algérienne">Algérienne</option>
                <option value="BBQ">BBQ</option>
              </select>
            </div>
          </div>
          
          <p class="prix-produit" data-price="5.00">5,00 €</p>
          <button aria-label="Ajouter Tacos M au panier">Ajouter au panier</button>
        </div>
      </div>

      <!-- Tacos L -->
      <div class="produit" id="Tacos-L">
        <img src="images/Tacos/L.png" alt="Tacos-L" class="image-produit" />
        <div class="produit-contenu">
          <h3>Tacos L</h3>
          <p class="description-produit">Garnis de frite & de sauce fromage - 2 viandes</p>
          
          <div class="options-tacos">
            <div class="option">
              <label for="viande1-tacosL">Viande 1 :</label>
              <select id="viande1-tacosL" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="viande2-tacosL">Viande 2 :</label>
              <select id="viande2-tacosL" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="sauce-tacosL">Sauce :</label>
              <select id="sauce-tacosL" class="sauce-select">
                <option value="Mayo Blanche">Mayo Blanche</option>
                <option value="Harissa">Harissa</option>
                <option value="Samourai">Samourai</option>
                <option value="Biggy">Biggy</option>
                <option value="Ketchup">Ketchup</option>
                <option value="Algérienne">Algérienne</option>
                <option value="BBQ">BBQ</option>
              </select>
            </div>
          </div>
          
          <p class="prix-produit" data-price="6.00">6,00 €</p>
          <button aria-label="Ajouter Tacos L au panier">Ajouter au panier</button>
        </div>
      </div>

      <!-- Tacos XL -->
      <div class="produit" id="Tacos-XL">
        <img src="images/Tacos/XL.png" alt="Tacos XL" class="image-produit" />
        <div class="produit-contenu">
          <h3>TACOS XL</h3>
          <p class="description-produit">Garnis de frite & de sauce fromage - 3 viandes</p>
          
          <div class="options-tacos">
            <div class="option">
              <label for="viande1-tacosXL">Viande 1 :</label>
              <select id="viande1-tacosXL" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="viande2-tacosXL">Viande 2 :</label>
              <select id="viande2-tacosXL" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="viande3-tacosXL">Viande 3 :</label>
              <select id="viande3-tacosXL" class="viande-select">
                <option value="Kebab">Kebab</option>
                <option value="Cordon Bleu">Cordon Bleu</option>
                <option value="Tenders">Tenders</option>
                <option value="Viande Hachée">Viande Hachée</option>
                <option value="Poulet Curry">Poulet Curry</option>
                <option value="Poulet Tandoori">Poulet Tandoori</option>
              </select>
            </div>
            
            <div class="option">
              <label for="sauce-tacosXL">Sauce :</label>
              <select id="sauce-tacosXL" class="sauce-select">
                <option value="Mayo Blanche">Mayo Blanche</option>
                <option value="Harissa">Harissa</option>
                <option value="Samourai">Samourai</option>
                <option value="Biggy">Biggy</option>
                <option value="Ketchup">Ketchup</option>
                <option value="Algérienne">Algérienne</option>
                <option value="BBQ">BBQ</option>
              </select>
            </div>
          </div>
          
          <p class="prix-produit" data-price="8.00">8,00 €</p>
          <button aria-label="Ajouter Tacos XL au panier">Ajouter au panier</button>
        </div>
      </div>
    </div>

    <!-- Panier Flottant -->
    <div id="panier-flottant">
      <button class="toggle">
        <span>Panier</span>
        <span id="compteur-panier">0</span>
      </button>

      <div id="contenu-panier">
        <h3>
          Votre sélection
          <button id="fermer-panier" aria-label="Fermer le panier">×</button>
        </h3>
        <ul id="liste-panier"></ul>
        <div class="total-fixe">
          <p>Total : <span id="total">0</span> €</p>
          <a href="Card.html">
            <button id="valider-commande">Voir le panier</button>
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Gestion du panier flottant
    document.querySelector('.toggle').addEventListener('click', function() {
      document.getElementById('panier-flottant').classList.toggle('active');
      document.getElementById('contenu-panier').classList.toggle('ouvert');
    });

    document.getElementById('fermer-panier').addEventListener('click', function() {
      document.getElementById('panier-flottant').classList.remove('active');
      document.getElementById('contenu-panier').classList.remove('ouvert');
    });

    // Gestion du panier
    const boutonsAjouter = document.querySelectorAll('.produit button');
    const compteurPanier = document.getElementById('compteur-panier');
    const listePanier = document.getElementById('liste-panier');
    const totalElement = document.getElementById('total');

    let panier = JSON.parse(localStorage.getItem('panier')) || [];

    function getTacosOptions(produitElement) {
      const options = {
        viandes: [],
        sauce: ''
      };
      
      const viandeSelects = produitElement.querySelectorAll('.viande-select');
      viandeSelects.forEach(select => {
        options.viandes.push(select.value);
      });
      
      const sauceSelect = produitElement.querySelector('.sauce-select');
      if (sauceSelect) {
        options.sauce = sauceSelect.value;
      }
      
      return options;
    }

    function trouverProduitIdentique(nom, prix, options) {
      return panier.find(item => 
        item.nom === nom && 
        item.prix === prix && 
        JSON.stringify(item.options) === JSON.stringify(options)
      );
    }

    boutonsAjouter.forEach(bouton => {
      bouton.addEventListener('click', () => {
        const produitElement = bouton.closest('.produit');
        const nom = produitElement.querySelector('h3').textContent.trim();
        const prix = parseFloat(produitElement.querySelector('.prix-produit').getAttribute('data-price'));
        const image = produitElement.querySelector('img').src;
        const options = getTacosOptions(produitElement);

        const produitExistant = trouverProduitIdentique(nom, prix, options);

        if (produitExistant) {
          produitExistant.quantite += 1;
        } else {
          const produit = {
            id: Date.now(),
            nom,
            prix,
            image,
            type: 'tacos',
            options,
            quantite: 1
          };
          panier.push(produit);
        }

        localStorage.setItem('panier', JSON.stringify(panier));
        afficherPanier();
        
        // Ouvrir le panier après ajout
        document.getElementById('panier-flottant').classList.add('active');
        document.getElementById('contenu-panier').classList.add('ouvert');
      });
    });

    function afficherPanier() {
      listePanier.innerHTML = '';
      let total = 0;

      panier.forEach(item => {
        if (typeof item.prix !== 'number' || isNaN(item.prix)) {
          item.prix = 0;
        }

        const li = document.createElement('li');
        li.classList.add('article-panier');

        const details = document.createElement('div');
        details.classList.add('details-panier');
        
        let optionsText = '';
        if (item.type === 'tacos') {
          optionsText = `
            <p>Viandes: ${item.options.viandes.join(', ')}</p>
            <p>Sauce: ${item.options.sauce}</p>
          `;
        }

        details.innerHTML = `
          <img src="${item.image}" alt="${item.nom}" />
          <div>
            <h4>${item.nom} × ${item.quantite}</h4>
            ${optionsText}
            <p>Prix unitaire : ${item.prix.toFixed(2)} €</p>
            <p>Prix total : ${(item.prix * item.quantite).toFixed(2)} €</p>
          </div>
        `;

        const boutonSupprimer = document.createElement('button');
        boutonSupprimer.textContent = '×';
        boutonSupprimer.classList.add('supprimer');
        boutonSupprimer.addEventListener('click', () => {
          panier = panier.filter(p => p.id !== item.id);
          localStorage.setItem('panier', JSON.stringify(panier));
          afficherPanier();
        });

        li.appendChild(details);
        li.appendChild(boutonSupprimer);
        listePanier.appendChild(li);

        total += item.prix * item.quantite;
      });

      compteurPanier.textContent = panier.reduce((acc, item) => acc + item.quantite, 0);
      totalElement.textContent = total.toFixed(2);
    }

    afficherPanier();
  </script>
</body>
</html>
